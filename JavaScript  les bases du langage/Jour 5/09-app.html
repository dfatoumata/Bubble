<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      section {
        display: grid;
        grid-template-columns: repeat(
          4,
          1fr
        ); /* 1fr = 1 franction, dans notre cas c'est pour prendre 1/4 A*/
        grid-gap: 10px;
      }
      img {
        max-width: 100%;
      }
    </style>
  </head>
  <body>
    <div></div>
    <script>
      //données
      let articles = [
        {
          id: 1,
          titre: "article1",
          contenu: "lorem ipsum 1",
          img: "http://via.placeholder.com/300x200",
        },
        {
          id: 2,
          titre: "article2",
          contenu: "lorem ipsum 2",
          img: "http://via.placeholder.com/300x200",
        },
      ];
    </script>
    <script>
      //ajouter dans la div : un formulaire contenant 3 champs
      window.addEventListener("DOMContentLoaded", () => {
        const formulaire = ` <form  onsubmit = "return ajouterArticle(this)">
            <div>
                <input type="hidden" name = "id">
            </div>
            <div>
                <label>titre</label>
                <input type="text" name = "titre">
            </div>
            <div>
                <label>Contenu</label>
                <br>

                <textarea name = "contenu"></textarea>
            </div>
            <div>    
                 <input type="submit">
            </div>
                 </form>
                 <section>
                 ${genererArticle()}
                 </section>`;
        document.querySelector("div").innerHTML = formulaire;
      });
    </script>
    <script>
      //ajouter à la suite du formulaire la liste des articles
      function genererArticle() {
        return articles
          .map(
            (article) => `<article>
                <h2>${article.titre}</h2>
                <img src = "${article.img}" alt = "img">
                <p>${article.contenu}</p>
               </article>
            `
          )
          .join("");
      }
    </script>
    <script>
      function ajouterArticle(form) {
        //ajouter dans la variable data les donnés saisie dans le formulaire puis déclencher genererArticle
        let titre = form.titre.value;
        let contenu = form.contenu.value;
        let nouvelleArticle = {
          titre: titre,
          contenu: contenu,
          img: "http://via.placeholder.com/300x200",
        };
        articles.push(nouvelleArticle);
        console.log(genererArticle());
        document.querySelector("section").innerHTML = genererArticle();
        form.reset();
        return false;
      }
    </script>
  </body>
</html>
